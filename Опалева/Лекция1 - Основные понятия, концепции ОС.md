#### Прерывания

- **Прерывание** (hardware interrpurt) - это событие, генерируемое внешним (по отношению к процессору) устройством. Посредством аппаратных прерываний аппаратура либо информирует центральный процессор о том, что произошло какое-либо событие, требующее немедленной реакции (например, пользователь нажал клавишу), либо сообщает о завершений асинхронной операции ввода-вывода (например, закончено чтение данных с диска в основную память).
- **Важный тип аппаратных прерываний** - прерывания таймера, которые генерируются периодически через фиксированный промежуток времени. Прерывание таймера используются операционной системой при планировании процессов.
* **Каждый тип аппаратных прерываний имеет собственный номер, однозначно определяющий источник прерывания.**
- **Аппаратное прерывание** - это асинхронное событие, то есть оно возникает вне зависимости от того, какой ход исполняется процессором в данный момент. Обработка аппаратного прерывания не должна учитывать, какой процесс является текущим.

#### Основные понятия ОС

- В любой *операционной системе* поддерживается механизм, который позволяет пользовательским программам обращаться к услугам ядра ОС.

- ***Системные вызовы*** (system calls) - интерфейс между *операционной системой* и пользовательской программой. Они создают, удаляют и используют различные объекты, главные из которых - процессы и файлы. Пользовательская программа запрашивает сервис у *операционной системы*, осуществляя *системный вызов.* Имеются библиотеки процедур, которые загружают машинные регистры определенными параметрами и осуществляют *операционные системы*. Цель таких библиотек - сделать *системный вызов* похожим на обычный *вызов* подпрограммы.

- Основное отличие состоит в том,  что при *системном вызове* задача переходит в привилегированный режим или режим ядра (kernel mode). Поэтому *системные вызовы* иногда еще называют программными *прерываниями*, в отличии от *аппаратных прерываний*, которые чаще называют просто прерываниями.

- В этом режиме работает код ядра *операционной системы*, причем исполняется он в адресном пространстве и в контексте вызвавшей его задачи. Таким образом, ядро *операционной системы* имеет полный доступ к памяти пользовательской программы, и при *системном вызове* достаточно передать адреса одной или нескольких областей памяти для результатов *вызова*.

- В большинстве *операционных систем системный вызов* осуществляется программного *прерывания* (INT). Таким образом, программное *прерывание (системный вызов)* - синхронное событие.


#### Основные понятия ОС

- Исключительные ситуации (exception) - событие, возникающее в результате попытки выполнения программой команды, которая по каким-то причинам не может быть выполнена до конца.
﻿﻿- Примерами таких команд могут быть попытки доступа к ресурсу при отсутствии достаточных привилегий или обращения к отсутствующей странице памяти.
﻿﻿- Исключительные ситуации, как и системные вызовы, являются синхронными событиями, возникающими в контексте текущей задачи.
﻿﻿- Исключительные ситуация, как и системные вызовы, являются синхронными событиями, возникающими в контексте текущей задачи.
﻿﻿- Исключительные ситуации можно разделить на исправимые и неисправимые.
-  К исправимым относятся такие исключительные ситуации, как отсутствие нужной информации в  оперативной памяти. После устранения причины исправимой исключительной ситуации программа может выполняться дальше. Возникновение в процессе работы операционной системы исправимых исключительных ситуаций считается нормальным явлением.
- Неисправимые исключительные ситуации чаще всего возникают в результате ошибок в программах (например, деление на ноль). Обычно в таких случаях операционная система реагирует завершением программы, вызвавшей исключительную ситуацию.


#### Файлы
﻿﻿- Файлы предназначены для хранения информации на внешних носителях, то есть принято, что информация, записанная, например, на диске, должна находиться внутри файла. Обычно под файлом понимают именованную часть пространства на носителе информации.
﻿﻿
- Главная задача **файловой системы** (file system) - скрытие особенностей ввода-вывода и возможность дать программисту простую абстрактную модель файлов, независимых от устройств.
﻿﻿
- Для чтения, создания, удаления, записи, открытия и закрытия файлов также имеется обширная категория системных вызовов (создание, удаление, открытие, закрытие, чтение и т.д.).
﻿﻿
- Пользователям хорошо знакомы такие связанные с организацией файловой системы понятия, как каталог, текущий каталог, корневой каталог, путь. Для манипулирования этими объектами в операционной системе имеются системные вызовы.


#### Процессы:

﻿- ﻿Понятие ***процесса*** характеризует некоторую совокупность набора исполняющихся команд, ассоциированных с ним ресурсов (выделенная для исполнения память или адресное пространство, стеки, используемые файлы и устройства ввода-вывода и т.д.) и текущего момента его выполнения (значения регистров, программного счетчика, состояние стека и значения переменных), находящуюся под управлением операционной системы.
﻿
﻿﻿- Не существует взаимно-однозначного соответствия между процессами и программами, обрабатываемыми вычислительными системами. Даже в случае обработки только одной программы в рамках одного процесса нельзя считать, что процесс представляет собой просто динамическое описание кода исполняемого файла, данных и выделенных для них ресурсов.

﻿﻿- *Процесс* находится под управлением операционной системы, поэтому в нем может выполняться часть кода ее ядра, как в случаях, специально запланированных авторами программы (например, при использовании системных вызовов), так и в непредусмотренных ситуациях (например, при обработке внешних прерываний).


  ***Нити:*** 
- Классический подход представляет собой выполнение процесса как единственный поток команд процессора. Однако в современных ОС возможно одновременное параллельное исполнение в одном процессе нескольких потоков команд, называемых *нитями*, или потоками (threads).
![[Pasted image 20250910122333.png]]
- a - "один процесс - один поток"
- б - " один процесс - много потоков"
- в - " много процессов с одним потоком в каждом"
- г - " много процессов и много потоков в каждом"



#### Основные функции классической ОС

Шесть основных функций, которые выполняют классические ОС:
- Планирование заданий и использования процессора.
- Обеспечение программ средствами коммуникации и синхронизации.
- Управление памятью.
- Управление файловой системой.
- Управление вводом-выводом.
- Обеспечение безопасности.
##### Каждая из функций обычно реализована в виде подсистемы, являющейся структурным компонентом ОС.


### Классификация ОС

По *способу организации вычислений:*

- **системы пакетной обработки** (batch processing os) - целью является выполнение максимального количества вычислительных задач за единицу времени;  при этом из нескольких задач формируется пакет, который обрабатывается системой;
- **системы разделения времени** (time-sharing os) - целью является возможность одновременного использования одного компьютера несколькими пользователями; реализуется посредством поочередного представления каждому пользователю интервала процессорного времени;
- **системы реального времени** (real-time os) - целью является выполнение каждой задачи за строго определенный для данной задачи интервала времени.

*По типу ядра:*
- **системы с монолитным ядром (monolithics os) - MS-DOS, Linux, FreeBSD**
- **системы с микроядром (microkernel os) - Mach, Symbian, MINIX 3;** 
- **системы с гибридным ядром (hybrid os) - NetWare, Windows.**

В монолитном ядре реаливуются все основные функции ОС, и оно является, по сути,
единой программой, представляющей собой совокупность процедур. В микроядре
остается лишь минимум функций, который должен быть реализован в
привилегированном режиме: планирование потоков, обработка прерываний,
межпроцессное взаимодействие. Остальные функции ОС по управлению
модулей в пользовательском режиме.
приложениями, памятью, безопасностью и пр. реализуются в виде отдельных.

По *количеству одновременно выполняемых задач:*
- **многозадачные** (multitasking operating systems) - Unix, Windows,
- **однозадачные** (single-tasking operating systems) - MS-DOS.

**Многозадачная ОС**, решая проблемы распределения ресурсов и конкуренции, полностью реализует мультипрограммный режим.
- Многозадачный режим, который воплощает в себе идею разделения времени, называется
истечении которого управление передается другой программе. Говорят, что первая программа
вытесняющим (preemptive). Каждой программе выделяется квант процессорного времени, по
будет вытеснена. В вытесняющем режиме работают пользовательские программы большинства
коммерческих ОС.
- В некоторых ОС (Windows 3.11, например) пользовательская программа может монополизировать
процессор, то есть работает в невытесняющем режиме. Как правило, в большинстве систем не
подлежит вытеснению код собственно ОС. Ответственные программы, в частности задачи
реального времени, также не вытесняются. Более подробно об этом рассказано в лекции,
посвященной планированию работы процессора.

По *количеству одновременно работающих пользователей:*
- **однопользовательские** (single-users os) - MS-DOS, Windows 3-x;
- **многопользовательские** (multi-users os) - Windows 2000и выше, Unix.

Наиболее существенное отличие заключается в наличии у многопользовательских систем механизмов защиты персональных данных каждого пользователя.

По количеству поддерживаемых процессоров:
- **однопроцессорные** (uniprocessor os);
- **многопроцессорные** (multiprocessor os).

Поддержка мультипроцессирования является важным свойством ОС и приводит к усложнению всех алгоритмов управления ресурсами. Многопроцессорная обработка реализована в таких ОС, как Linux, Solaris, Windows NT и выше, и ряде других.

Многопроцессорные ОС разделяют на **симметричные и асимметричные.**
- В *симметричных ОС* на каждом процессоре функционирует одно и то же ядро, и задача может быть выполнена на любом процессоре, то есть обработка полностью децентрализована. При этом каждому из процессоров доступна вся память.
- В *асимметричных ОС* процессоры неравноправны. Обычно существует главный процессор (master) и подчиненные (slave), загрузку и характер работы которых определяет главный процессор.

По *роли в сетевом взаимодействии:* 
- **серверные** (server os) - ОС, предоставляющие доступ к ресурсам сети и управляющие сетевой инфраструктурой;
- **клиентские** (clietn os) - ОС, которые могут получать доступ к ресурсам сети.

Примером серверных ОС является линейка версий Windows Server, начиная с Windows Server 2003, далее 2008, 2012, 2016 и т.д.


По *типу лицензии:*
- **открытые** (open-source os) - ОС с открытым исходным кодом, доступным для изучения и изменения;
- **проприетарные** (proprietary os) - ОС, которые имеют конкретного правообладателя; обычно поставляются с закрытым исходным кодом.

Несколько самых популярных бесплатных лицензий на открытое ПО:
- GNU General Public (GPL): GNU - гарантирует пользователям возможность запускать, изучать, модифицировать и обмениваться ПО.
- Apache: Apache License 2.0 - позволяет использовать, модифицировать и распространять По с любой целью.
- MySQL: MySQL - открытая СУБД с двумя отдельными вариантами лицензирования: MySQL Standart Edition и MySQL Enterprise Edition.
- Ubuntu: Ubuntu - дистрибутив Linux, состоящий из свободного и открытого программного обеспечения и выпущенный в виде версий для настольных компьютеров, облака и Интернета вещей.

По *области применения:*
- **ОС мэйнфреймов** - больших компьютеров (mainframe os);
- **ОС серверов** (server os);
- **ОС персональных компьютеров** (personal computer os);
- **ОС мобильных устройств** (mobile os);
- **встроенные ОС** (embedded os) - система специального назначения, где компьютер полностью инкапсулирован в основное устройство. В отличие от компьютера общего назначения (например, ПК), встраиваемая система предназначена для решения одной или нескольких заранее определенных задач в конкретной предметной области (от МР3-плееров до интеллектуальных датчиков на электростанциях);
- **ОС маршрутизаторов** (router os).

### Требования к ОС

Основное - выполнение **6 функций**, перечисленных выше.


Кроме этого:

- **расширяемость** - возможность приобретения системой новых функций в процессе эволюции; часто реализуется за счет добавления новых модулей;
﻿﻿- **переносимость** - возможность переноса операционной системы на другую аппаратную платформу с минимальными изменениями;
﻿﻿- **совместимость** - способность совместной работы; может иметь место совместимость новой версии операционной системы с приложениями, написанными для старой версии, или совместимость разных операционных систем в том смысле, что приложения для одной из этих систем можно запускать на другой и наоборот;
﻿﻿- **надежность** - вероятность безотказной работы системы;
﻿﻿- **производительность** - способность обеспечивать приемлемые время решения задач и время реакции системы.

